{% extends "base.html" %}

{% block title %}Error {{ error_code }} - Dengue Risk Predictor{% endblock %}

{% block content %}
<div class="container-fluid py-5" style="background: linear-gradient(135deg, #0a2c5c, #499aa8); min-height: 100vh;">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <div class="text-center">
                <!-- Error Icon -->
                <div class="mb-4">
                    {% if error_code == 404 %}
                        <i class="fas fa-map-marker-question fa-4x text-warning mb-3"></i>
                    {% elif error_code == 403 %}
                        <i class="fas fa-lock fa-4x text-danger mb-3"></i>
                    {% else %}
                        <i class="fas fa-exclamation-triangle fa-4x text-warning mb-3"></i>
                    {% endif %}
                </div>

                <!-- Error Card -->
                <div class="card" style="background: rgba(16, 90, 165, 0.3); border: 1px solid rgba(73, 154, 168, 0.5);">
                    <div class="card-body text-light py-5">
                        <h1 class="display-4 text-warning mb-3">{{ error_code }}</h1>
                        
                        {% if error_code == 404 %}
                            <h3 class="text-light mb-3">Page Not Found</h3>
                            <p class="lead">
                                Sorry, the page you're looking for doesn't exist or has been moved.
                            </p>
                        {% elif error_code == 403 %}
                            <h3 class="text-light mb-3">Access Forbidden</h3>
                            <p class="lead">
                                You don't have permission to access this resource.
                            </p>
                        {% else %}
                            <h3 class="text-light mb-3">Oops! Something went wrong</h3>
                            <p class="lead">
                                {{ error_message or "An unexpected error occurred. Please try again later." }}
                            </p>
                        {% endif %}

                        <div class="mt-4">
                            <a href="{{ url_for('index') }}" class="btn btn-primary btn-lg me-3">
                                <i class="fas fa-home me-2"></i>Go Home
                            </a>
                            
                            {% if current_user.is_authenticated %}
                                <a href="{{ url_for('dashboard') }}" class="btn btn-info btn-lg">
                                    <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                                </a>
                            {% else %}
                                <a href="{{ url_for('login') }}" class="btn btn-success btn-lg">
                                    <i class="fas fa-sign-in-alt me-2"></i>Login
                                </a>
                            {% endif %}
                        </div>

                        <!-- Help Section -->
                        <div class="mt-5">
                            <h6 class="text-light">Need Help?</h6>
                            <p class="small text-muted">
                                If this problem persists, please try:
                            </p>
                            <ul class="list-unstyled small text-muted">
                                <li><i class="fas fa-refresh me-2"></i>Refreshing the page</li>
                                <li><i class="fas fa-sign-out-alt me-2"></i>Logging out and back in</li>
                                <li><i class="fas fa-trash me-2"></i>Clearing your browser cache</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                {% if current_user.is_authenticated %}
                <div class="row mt-4">
                    <div class="col-md-4">
                        <a href="{{ url_for('symptom_checker_route') }}" class="btn btn-outline-light w-100">
                            <i class="fas fa-stethoscope me-2"></i>Check Symptoms
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a href="{{ url_for('risk_calculator_route') }}" class="btn btn-outline-light w-100">
                            <i class="fas fa-calculator me-2"></i>Risk Calculator
                        </a>
                    </div>
                    <div class="col-md-4">
                        <a href="{{ url_for('dengue_experience') }}" class="btn btn-outline-light w-100">
                            <i class="fas fa-heartbeat me-2"></i>My Experience
                        </a>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
// Auto redirect to home after 30 seconds for 500 errors
{% if error_code == 500 %}
setTimeout(function() {
    if (confirm('Would you like to return to the home page?')) {
        window.location.href = '{{ url_for("index") }}';
    }
}, 30000);
{% endif %}

// Add back button functionality
if (window.history.length > 1) {
    document.addEventListener('DOMContentLoaded', function() {
        const backBtn = document.createElement('button');
        backBtn.className = 'btn btn-outline-light btn-sm mt-2';
        backBtn.innerHTML = '<i class="fas fa-arrow-left me-2"></i>Go Back';
        backBtn.onclick = function() { window.history.back(); };
        
        const cardBody = document.querySelector('.card-body');
        cardBody.appendChild(backBtn);
    });
}
</script>
{% endblock %}
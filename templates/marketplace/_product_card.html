<!-- Product Card Partial Template -->
<div class="card h-100" style="background: linear-gradient(135deg, rgba(16, 90, 165, 0.8), rgba(73, 154, 168, 0.8)); border: 1px solid rgba(73, 154, 168, 0.5); backdrop-filter: blur(10px);">
    {% if product.image_url %}
    <div class="position-relative">
        <img src="{{ product.image_url }}" class="card-img-top" alt="{{ product.name }}" 
             style="height: 200px; object-fit: cover;">
        {% if product.discount_percentage > 0 %}
        <span class="position-absolute top-0 end-0 badge bg-danger m-2">
            -{{ product.discount_percentage }}%
        </span>
        {% endif %}
        {% if product.is_featured %}
        <span class="position-absolute top-0 start-0 badge bg-warning m-2">
            <i class="fas fa-star"></i> Featured
        </span>
        {% endif %}
    </div>
    {% endif %}
    
    <div class="card-body d-flex flex-column">
        <h6 class="card-title text-light fw-bold">{{ product.name }}</h6>
        
        {% if product.short_description %}
        <p class="card-text text-light small">{{ product.short_description[:80] }}{% if product.short_description|length > 80 %}...{% endif %}</p>
        {% endif %}
        
        <!-- Price Section -->
        <div class="mb-2">
            {% if product.discounted_price %}
            <span class="h6 text-warning fw-bold">₹{{ "%.0f"|format(product.discounted_price) }}</span>
            <span class="text-light text-decoration-line-through ms-2">₹{{ "%.0f"|format(product.price) }}</span>
            {% else %}
            <span class="h6 text-warning fw-bold">₹{{ "%.0f"|format(product.price) }}</span>
            {% endif %}
        </div>
        
        <!-- Effectiveness Rating -->
        {% if product.effectiveness_rating %}
        <div class="mb-2">
            <small class="text-light">Effectiveness:</small>
            <div>
                {% for i in range(5) %}
                    {% if i < product.effectiveness_rating %}
                    <i class="fas fa-star text-warning"></i>
                    {% else %}
                    <i class="far fa-star text-light"></i>
                    {% endif %}
                {% endfor %}
                <span class="small text-light ms-1">{{ product.effectiveness_rating }}/5</span>
            </div>
        </div>
        {% endif %}
        
        <!-- Stock Status -->
        {% if product.stock_quantity > 0 %}
        <div class="mb-2">
            {% if product.stock_quantity < 10 %}
            <span class="badge bg-warning">Only {{ product.stock_quantity }} left</span>
            {% else %}
            <span class="badge bg-success">In Stock</span>
            {% endif %}
        </div>
        {% else %}
        <div class="mb-2">
            <span class="badge bg-danger">Out of Stock</span>
        </div>
        {% endif %}
        
        <!-- Action Buttons -->
        <div class="mt-auto">
            <div class="d-flex gap-2">
                <a href="{{ url_for('product_detail', product_id=product.id) }}" 
                   class="btn btn-outline-light btn-sm flex-grow-1">
                    <i class="fas fa-eye me-1"></i>Details
                </a>
                {% if current_user.is_authenticated and product.stock_quantity > 0 %}
                <button class="btn btn-warning btn-sm flex-grow-1" 
                        onclick="addToCart({{ product.id }}, '{{ product.name }}')">
                    <i class="fas fa-cart-plus me-1"></i>Add to Cart
                </button>
                {% elif not current_user.is_authenticated %}
                <a href="{{ url_for('login') }}" class="btn btn-info btn-sm flex-grow-1">
                    <i class="fas fa-sign-in-alt me-1"></i>Login to Buy
                </a>
                {% else %}
                <button class="btn btn-outline-light btn-sm flex-grow-1" disabled>
                    <i class="fas fa-times me-1"></i>Unavailable
                </button>
                {% endif %}
            </div>
        </div>
    </div>
</div>